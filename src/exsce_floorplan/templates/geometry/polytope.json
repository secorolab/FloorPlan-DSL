{% import "./floorplan/identifiers.json" as ids %}

{% macro polygon(space) -%}
{
    "@id": "polytope:{{ ids.polygon_id(space) }}",
    "@type": "Polygon",
    "points": [
    {% for point_id in space.get_shape().get_points() %}
    "geom:{{ ids.shape_point_id(space, loop.index0)}}"
    {%- if not loop.last %},
    {% endif %}
    {% endfor +%}
    ]
}
{%- endmacro %}

{% macro polygon_walls(space, wall_id) -%}
{
    "@id": "polytope:{{ ids.wall_polygon_id(space, wall_id) }}",
    "@type": "Polygon",
    "points": [
    {% for corner in [0, 1, 2, 3] %}
    "geom:{{ ids.wall_corner_point_id(space, wall_id, corner) }}"
    {%- if not loop.last %},
    {% endif %}
    {% endfor +%}
    ]
}
{%- endmacro -%}

{% macro floor_features(space, feature) -%}
{
    "@id": "polytope:{{ ids.feature_polygon_id( space, feature) }}"
    "@type": "Polygon",
    "points": [
        {% for point in feature.get_points() %}
        "geom:{{ ids.feature_shape_point_id(feature.name, point) }}"
    {%- if not loop.last %},
    {% endif %}
        {% endfor +%}
    ]
}
{%- endmacro %}
