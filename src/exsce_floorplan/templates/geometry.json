{% from './identifiers.json' import point_id, frame_id, shape_point_id %}
{% import "./identifiers.json" as ids %}

{%- macro point(identifier) -%}
{
    "@id": "{{ ids.point_id(identifier) }}",
    "@type": "Point"
}
{%- endmacro -%}
{%- macro frame(name, origin) -%}
{
    "@id": "{{ ids.frame_id(name) }}",
    "@type": "Frame",
    "origin": "{{ ids.point_id(origin) }}"
}
{%- endmacro -%}

{% macro shape_points(space) -%}
{%- for point_id in space.get_shape().get_points() %}
{{ point(ids.shape_point_id(space, loop.index0)) }},
{% endfor -%}
{%- endmacro -%}

{% macro polygon(space) -%}
{
    "@id": "polytope:{{ ids.polygon_id(space) }}",
    "@type": "Polygon",
    "points": [
    {% for point_id in space.get_shape().get_points() %}
    "geom:{{ ids.shape_point_id(space, loop.index0)}}"
    {%- if not loop.last %},
    {% endif %}
    {% endfor +%}
    ]
}
{%- endmacro %}